const o={props:{proxy:Object},created:function(){this.endpoint=this.item.endpoint||this.item.url,this.endpoint&&this.endpoint.endsWith("/")&&(this.endpoint=this.endpoint.slice(0,-1))},methods:{fetch:function(t,d,h=!0){var n,r;let e={};(n=this.proxy)!=null&&n.useCredentials&&(e.credentials="include"),(r=this.proxy)!=null&&r.headers&&this.proxy.headers&&(e.headers=this.proxy.headers),this.item.useCredentials!==void 0&&(e.credentials=this.item.useCredentials===!0?"include":"omit"),this.item.headers!==void 0&&this.item.headers&&(e.headers=this.item.headers),e=Object.assign(e,d),t.startsWith("/")&&(t=t.slice(1));let s=this.endpoint;return t&&(s=`${this.endpoint}/${t}`),fetch(s,e).then(i=>{if(!i.ok)throw new Error(`Ping: target not available (${i.status} error)`);return h?i.json():i})}}};export{o as s};
